"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2009],{55107:function(e,n,t){t.d(n,{T:function(){return d}});var r=t(83849),o=t.n(r),a=t(29901),i=t(71755),c=t(22529),s=t(99729),u=t(61250),l=function(e,n){return"@".concat(n)},d=function(e){var n=e.defaultValue,t=e.inputRef,r=e.onChange,d=e.onFocus,f=e.markup,m=e.placeholder,p=e.rows,x=void 0===p?1:p,v=e.users,h=void 0===v?[]:v,b=e.loginToMention,g=(0,s.a)().isAuthenticated,y=(0,a.useMemo)((function(){return b&&!g}),[b,g]),j=(0,a.useMemo)((function(){return y?[{id:"",display:"",avatarUrl:"",email:""}]:h.map((function(e){return{id:e.id,display:e.name,avatarUrl:e.avatarUrl,email:e.email}}))}),[h,y]),w=(0,a.useCallback)((function(e,n,t,r,a){var i,s=null!==(i=e.display)&&void 0!==i?i:"";return(0,u.jsx)("div",{className:o()("flex flex-row items-center p-2 -m-2 rounded-lg",{"bg-gray-50":!y&&a}),children:y?(0,u.jsx)("div",{className:"flex justify-start items-center w-full h-6 -my-3 text-gray-600",children:"Log in to mention"}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"flex items-center justify-center w-8 h-8 mr-2",children:(0,u.jsx)(c.q,{name:s,avatarOnly:!0,large:!0})}),(0,u.jsxs)("div",{className:"flex flex-col max-w-60 overflow-hidden",children:[(0,u.jsx)("div",{className:"text-sm font-lf-bold truncate text-gray-600",children:t}),(0,u.jsx)("div",{className:"text-gray-400 text-[11px] truncate",children:e.email})]})]})})}),[y]),C=(0,a.useCallback)((function(){y&&window.location.assign("".concat("https://accounts.lottiefiles.com","/login?return_to=").concat(encodeURIComponent(window.location.href)))}),[y]);return(0,u.jsx)("div",{className:"w-full text-sm lf-font-base",children:(0,u.jsx)(i.r,{inputRef:t,value:f,defaultValue:n,placeholder:m,rows:x,onChange:r,onFocus:d,className:"comments-input",allowSpaceInQuery:!0,children:(0,u.jsx)(i.p,{trigger:"@",markup:y?"@__id__":"@{user:__display__:__id__}",displayTransform:l,data:j,appendSpaceOnAdd:!0,renderSuggestion:w,onAdd:C})})})}},53338:function(e,n,t){t.d(n,{a:function(){return c}});t(29901);var r=t(22529),o=t(50719),a=t(28567),i=t(61250),c=function(e){var n=e.createdAt,t=e.name,c=e.src;return(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"w-8 h-8 mr-2",children:(0,i.jsx)(r.q,{src:c,name:t,avatarOnly:!0})}),(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsxs)(o.Z,{className:"text-sm text-gray-900 font-lf-semi-bold",children:[t," "]}),(0,i.jsx)(o.Z,{variant:"caption-2",color:"gray",children:(0,i.jsx)(a.b,{date:n})})]})]})}},68790:function(e,n,t){t.d(n,{F:function(){return u}});var r=t(55312),o=t(24642),a=t.n(o),i=t(29901),c=t(23646),s=t(61250),u=function(e){var n=e.comment,t=e.onCancel,o=e.onDelete,u=(0,i.useCallback)((function(e){t(),e.stopPropagation()}),[t]),l=(0,i.useCallback)(function(){var e=(0,r.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o(n.id),t.stopPropagation();case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[n.id,o]);return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center w-full h-full space-y-2",children:[(0,s.jsx)("p",{className:"w-full text-sm text-center text-gray-600",children:"Delete this comment?"}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)(c.z,{text:"Cancel",variant:"secondary",onClick:u}),(0,s.jsx)(c.z,{text:"Delete",color:"red",onClick:l})]})]})}},32491:function(e,n,t){t.d(n,{z:function(){return c}});var r=t(29901),o=t(53338),a=t(48240),i=t(61250),c=function(e){var n,t,c,s,u=e.comment,l=e.mentionables,d=e.onCancel,f=e.onEdit,m=(0,r.useCallback)((function(e){var n=e.body;f(u.id,n)}),[u,f]);return(0,i.jsxs)("div",{className:"flex flex-col px-4 py-2",children:[u.nodeId&&(0,i.jsx)("div",{className:"flex",children:(0,i.jsx)("p",{className:"text-sm text-gray-400",children:u.nodeId})}),(0,i.jsx)(o.a,{src:null===(n=u.user)||void 0===n?void 0:n.avatarUrl,name:null!==(t=null!==(c=null===(s=u.user)||void 0===s?void 0:s.name)&&void 0!==c?c:u.guestName)&&void 0!==t?t:"Anonymous",createdAt:new Date(u.createdAt)}),(0,i.jsx)("div",{className:"space-y-2",children:(0,i.jsx)(a._,{loginToMention:!0,placeholder:"Edit your commentâ€¦",defaultValue:u.body,postButtonText:"Update",onCancel:d,onPost:m,mentionables:l})})]})}},48240:function(e,n,t){t.d(n,{_:function(){return l}});var r=t(83849),o=t.n(r),a=t(29901),i=t(55107),c=t(23646),s=t(66523),u=t(61250),l=function(e){var n=e.borderless,t=e.coordinates,r=e.defaultValue,l=void 0===r?"":r,d=e.frame,f=e.loginToMention,m=e.mentionables,p=e.onCancel,x=e.onPost,v=e.placeholder,h=void 0===v?"Add a comment. Use @ to mention.":v,b=e.postButtonText,g=void 0===b?"Comment":b,y=e.rows,j=void 0===y?1:y,w=(0,a.useRef)(null),C="number"==typeof d,O=(0,a.useState)(!1),k=O[0],N=O[1],P=(0,a.useRef)(null),D=(0,a.useState)(l||""),E=D[0],_=D[1];(0,a.useEffect)((function(){var e;null===(e=w.current)||void 0===e||e.focus(),N(!0)}),[w]),(0,s.Z)(w,(function(){k&&N(!1)}));var F=(0,a.useCallback)((function(){N(!0)}),[]),I=(0,a.useCallback)((function(e){w.current&&0!==E.trim().length&&(x({body:E,frame:d,coordinates:t}),w.current.value=""),e.stopPropagation(),_("")}),[x,d,E,t]),R=(0,a.useCallback)((function(e){w.current&&(w.current.value=""),e.stopPropagation(),null==p||p()}),[p]),S=(0,a.useCallback)((function(e,n){_(n)}),[]);return(0,u.jsx)("div",{className:"flex",ref:P,children:(0,u.jsx)("div",{className:o()({"flex w-full":!0}),children:(0,u.jsxs)("div",{className:"flex flex-col w-full space-y-1",children:[(0,u.jsxs)("div",{className:o()({"relative flex p-1 pb-0 items-center justify-center rounded-md bg-gray-50":!0,"border border-teal-200":!n&&k,"border border-gray-300":!n&&!k}),children:[C&&(0,u.jsxs)("span",{className:o()({"absolute flex items-center z-10 text-gray-600 bg-teal-200 text-xs px-1 rounded-md":!0,"left-1.5 top-[5px]":!n,"left-1 top-[6px]":n}),children:["#",d]}),(0,u.jsx)("div",{className:o()({"w-full relative flex items-center":!0,"indent-8":C&&1===d.toString().length,"indent-9":C&&2===d.toString().length,"indent-10":C&&d.toString().length>=3}),children:(0,u.jsx)(i.T,{loginToMention:f,inputRef:w,defaultValue:l,placeholder:h,rows:j,users:m,onChange:S,markup:E,onFocus:F})})]}),(0,u.jsx)("div",{className:"flex-grow"}),(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("div",{className:"flex-grow"}),(0,u.jsxs)("div",{className:"flex space-x-2",children:[(0,u.jsx)(c.z,{text:"Cancel",variant:"secondary",onClick:R}),(0,u.jsx)(c.z,{text:g||"Comment",onClick:I})]})]})]})})})}},72563:function(e,n,t){t.d(n,{j:function(){return d}});var r=t(55312),o=t(24642),a=t.n(o),i=t(29901),c=t(40699),s=t(99897),u=t(52700),l=t(61250),d=function(e){var n,t=e.commentId,o=e.container,d=e.currentUserId,f=e.isResolved,m=e.onDeleteClick,p=e.onEditClick,x=e.onResolve,v=e.onUnresolve,h=e.userId,b=(0,i.useState)(!1),g=b[0],y=b[1],j=function(){var e=(0,r.Z)(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v(t),n.stopPropagation(),y(!0);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),w=(0,l.jsx)(c.h,{name:"meatball-menu",iconLighter:!0,hoverBackgroundClass:"hover:bg-gray-100",focusBackgroundClass:"focus:bg-gray-100",sizeClass:"h-8 w-8"}),C={label:"Resolve",icon:(0,l.jsx)(s.J,{name:"tick",color:"text-gray-500",marginRight:!0}),onClick:function(e){x(t),e.stopPropagation(),y(!0)}},O={label:"Open Discussion",icon:(0,l.jsx)(s.J,{name:"tick",color:"text-gray-500",marginRight:!0}),onClick:j},k=(0,i.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),p()}),[p]),N={label:"Edit",icon:(0,l.jsx)(s.J,{name:"pencil",color:"text-gray-500",marginRight:!0}),onClick:k},P={label:"Delete",icon:(0,l.jsx)(s.J,{name:"delete",marginRight:!0}),destructiveAction:!0,onClick:function(e){m(),e.stopPropagation(),y(!0)}};return n=f?h&&h===d?[[O,N,P]]:[[O]]:h&&h===d?[[C,N,P]]:[[C]],(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(u.h_,{forceClose:g,closeCallback:function(){return y(!1)},container:o,placement:"bottom-end",wrapperCssClasses:"absolute right-0 top-1",button:w,items:n,width:f?"w-44":"w-32"})})}},31622:function(e,n,t){t.d(n,{_:function(){return p}});var r=t(77916),o=t(51848),a=t(90836),i=t(29901),c=t(44929),s=t(61250),u=function(e){var n=e.frameNumber,t=e.onClick,r=(0,i.useCallback)((function(e){e.stopPropagation(),t&&t()}),[t]);return null==n?null:(0,s.jsx)(s.Fragment,{children:t?(0,s.jsx)("span",{className:"flex float-left bg-teal-200 px-2 rounded-md mr-2 font-small h-[20px]",children:(0,s.jsxs)("button",{type:"button",className:"text-xs text-teal-800 focus:outline-none",onClick:r,children:["#",n]})}):(0,s.jsxs)("span",{className:"px-1 mr-2 text-xs text-teal-800 bg-teal-200 rounded-md focus:outline-none",children:["#",n]})})},l=t(95334),d=["node"];function f(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function m(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?f(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var p=function(e){var n=e.body,t=e.frame,r=void 0!==t,f=(0,a.useRouter)(),p=f.pathname,x=f.push,v=f.query,h=(0,i.useCallback)((function(){v.frame="".concat(t),v.filter="keyframe-specific",x({pathname:p,query:v},void 0,{shallow:!0})}),[x,p,v,t]),b=(0,i.useMemo)((function(){return function(e){var n=e;(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).forEach((function(e){if(e.type===l.ow.User){var t=e.user,r=t.id,o=t.name,a=new RegExp("@{user:.+?:".concat(r,"}"),"gu");n=n.replace(a,"**@".concat(o,"**"))}}));var t=/@\{user:((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+?):[0-9a-f]{8}(?:\x2D[0-9a-f]{4}){3}\x2D[0-9a-f]{12}\}/g;return n=n.replace(t,"**@$1**")}(n)}),[n]);return(0,s.jsxs)("p",{className:"mt-2 break-words",children:[r?(0,s.jsx)(u,{frameNumber:t,onClick:h}):(0,s.jsx)(s.Fragment,{}),(0,s.jsx)("span",{className:"text-sm text-gray-600 font-lf-base",children:(0,s.jsx)(c.D,{components:{strong:function(e){e.node;var n=(0,o.Z)(e,d);return(0,s.jsx)("strong",m(m({},n),{},{className:"font-bold text-gray-600"}))}},className:"whitespace-pre-wrap",children:b})})]})}},9762:function(e,n,t){t.d(n,{U:function(){return x}});var r=t(29901),o=t(55312),a=t(24642),i=t.n(a),c=t(83849),s=t.n(c),u=t(88406),l=t(61250),d=(0,u.default)((0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(7642),t.e(3434),t.e(7478)]).then(t.bind(t,27478)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[27478]},modules:["../components/page/animation/comment/reaction-counter.tsx -> ./emoji"]}}),f=function(e){var n=e.count,t=e.emoji,o=e.onClick,a=e.userHasReacted,i=void 0!==a&&a,c=(0,r.useCallback)((function(e){o(t,i),e.stopPropagation()}),[o,i,t]);return(0,l.jsx)("button",{type:"button",className:s()("flex items-center h-5 px-1 py-1 border border-opacity-0 hover:border-opacity-1 rounded-md text-gray-400 hover:text-gray-700",{"hover:border-gray-700 bg-gray-100":!i,"hover:border-teal-200 bg-teal-50":i}),onClick:c,children:(0,l.jsx)(r.Suspense,{fallback:null,children:(0,l.jsxs)("div",{className:"flex items-center space-x-1 cursor-pointer",children:[(0,l.jsx)(d,{id:t,size:"12px"}),(0,l.jsx)("p",{className:"text-xs",children:n})]})})},"reaction-counter-".concat(t))},m=(0,r.memo)(f),p=function(e){var n=e.reactions,t=void 0===n?[]:n,o=e.onReactionClick,a=e.currentUserId,i=(0,r.useMemo)((function(){var e=[];return null!=t&&t.length?(t.forEach((function(n){var t,r,o=e.find((function(e){return e.emoji===n.type}));o?(o.count+=1,o.userHasReacted=Boolean(o.userHasReacted)||(null===(t=n.user)||void 0===t?void 0:t.id)===a):(o={emoji:n.type,count:1,userHasReacted:(null===(r=n.user)||void 0===r?void 0:r.id)===a},e.push(o))}),[]),e):e}),[a,t]),c=(0,r.useMemo)((function(){return i.map((function(e){return(0,l.jsx)("li",{children:(0,l.jsx)(m,{emoji:e.emoji,count:e.count,userHasReacted:e.userHasReacted,onClick:o})},"reaction-count-".concat(e.emoji))}))}),[i,o]);return i.length?(0,l.jsx)("ul",{className:"flex flex-row space-x-1",children:c}):null},x=(0,r.memo)(p)},77728:function(e,n,t){t.d(n,{j:function(){return b}});var r=t(55312),o=t(24642),a=t.n(o),i=t(83849),c=t.n(i),s=t(88406),u=t(29901),l=t(99897),d=t(82325),f=t(61250),m=(0,s.default)((0,r.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(7642),t.e(3434),t.e(7478)]).then(t.bind(t,27478)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[27478]},modules:["../components/page/animation/comment/reaction-selector.tsx -> ./emoji"]}}),p=[{id:"+1"},{id:"heart"},{id:"joy"},{id:"open_mouth"},{id:"pensive"},{id:"angry"}],x=function(e){var n=e.emojiId,t=e.onClick,r=e.size,o=void 0===r?"18px":r,a=(0,u.useCallback)((function(){t(n)}),[t,n]);return(0,f.jsx)("button",{className:"flex items-center w-5 h-5 transform rounded-full hover:scale-110",type:"button","data-text":n,onClick:a,children:(0,f.jsx)(m,{id:n,size:o})})},v=(0,u.memo)(x),h=function(e){var n=e.commentId,t=e.hoverBackgroundClassName,r=e.hoverTextColorClassName,o=e.onSelect,a=(0,u.useCallback)((function(e){o(n,e,!1)}),[n,o]),i=(0,u.useCallback)((function(e){e.stopPropagation()}),[]),s=(0,u.useMemo)((function(){return(0,f.jsx)("ul",{className:"flex flex-row items-center",children:p.map((function(e){var n=e.id;return(0,f.jsx)("li",{className:"px-1",children:(0,f.jsx)(v,{emojiId:n,onClick:a})},"reaction-item-".concat(n))}))})}),[a]);return(0,f.jsx)("div",{onClick:i,children:(0,f.jsx)(d.J,{showArrow:!1,placement:"top-end",offsetY:-2,additionalCssClasses:"bg-white !rounded-full shadow !shadow-sm border !border-transparent px-3 py-2",content:s,children:(0,f.jsx)("div",{className:c()("p-1 rounded-full cursor-pointer",t,r),children:(0,f.jsx)(l.J,{name:"reaction",color:"text-gray-500"})})})})},b=u.memo(h)},60919:function(e,n,t){t.d(n,{z:function(){return i}});t(29901);var r=t(13485),o=t(61250),a=function(e){var n=e.shortcutKey,t="sm"===e.size?"text-xs h-4 min-w-[1rem] px-0.5":"text-sm h-6 min-w-[1.5rem] px-1";return(0,o.jsx)("span",{className:"flex items-center justify-center bg-gray-500 text-white text-sm rounded-sm ".concat(t),children:n})},i=function(e){var n=e.keys,t=e.metaKey,i=e.separator,c=e.size,s=void 0===c?"sm":c,u=e.width,l=void 0===u?"":u,d=r.Mq?"âŒ˜":"ctrl";return(0,o.jsxs)("div",{className:"flex flex-row items-center space-x-1 ".concat(l),children:[t&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a,{shortcutKey:d,size:s}),i&&(0,o.jsx)("span",{className:"text-gray-900",children:"+"})]}),n.map((function(e,t){return(0,o.jsxs)("div",{children:[(0,o.jsx)(a,{shortcutKey:e,size:s}),i&&!(n.length-1===t)&&(0,o.jsx)("span",{className:"text-gray-900",children:"+"})]},e)}))]})}},93065:function(e,n,t){t.d(n,{a:function(){return o}});var r=t(34916),o=function(e){var n=e.scopes,t=function(){return n.includes(r.GN.FULL_ACCESS)},o=function(){return t()||n.includes(r.GN.DOWNLOAD)};return{canView:function(){return t()||o()||n.includes(r.GN.VIEW)},canFullAccess:t,canDownload:o}}},36359:function(e,n,t){t.d(n,{w:function(){return p}});var r=t(77916),o=t(89303),a=t(29901),i=t(99729),c=t(25044),s=t(90836);function u(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?u(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var d=t(24450);function f(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function m(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?f(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function p(){var e,n,t=(0,i.a)().user,u=(e="panel",[(n=(0,s.useRouter)()).query[e],(0,a.useCallback)((function(t){var r=l({},n.query);r[e]=t,""===t&&delete r[e],n.push({query:l({},r)},void 0,{shallow:!0})}),[])]),f=(0,o.Z)(u,2),p=f[0],x=f[1],v=(0,c._)("animation_sidebar_panel_state",{}),h=(0,o.Z)(v,2)[1],b=(0,a.useCallback)((function(e){x(e===d.s.NONE?"":e)}),[]),g=(0,a.useMemo)((function(){if("string"==typeof p){var e=Object.values(d.s).find((function(e){return e===p}));if(e)return e}return d.s.NONE}),[p]);return(0,a.useEffect)((function(){null!=t&&t.id&&g!==d.s.NONE&&h((function(e){return e[t.id]===g?e:m(m({},e),{},(0,r.Z)({},t.id,g))}))}),[null==t?void 0:t.id,g]),[g,b]}},1358:function(e,n,t){t.d(n,{Y:function(){return o}});var r=t(29901),o=function(e){var n=e.executeOnInit,t=void 0!==n&&n,o=e.interval,a=void 0===o?12e5:o,i=e.pause,c=void 0!==i&&i,s=e.task;(0,r.useEffect)((function(){if(s&&!c){t&&s();var e=setInterval((function(){s()}),a);return function(){clearInterval(e)}}return function(){}}),[s,c,t,a])}},30364:function(e,n,t){t.d(n,{J:function(){return d}});var r=t(55312),o=t(89303),a=t(24642),i=t.n(a),c=t(29901),s=t(389),u=t(1358),l=t(36060),d=function(e){var n=e.parentCommentId,t=(0,s.m8)(),a=(0,c.useState)(!1),d=a[0],f=a[1],m=(0,s.aM)({query:l.ki,variables:{id:n},pause:!n}),p=(0,o.Z)(m,1)[0],x=(0,c.useCallback)((0,r.Z)(i().mark((function e(){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.query(l.ki,{id:n,first:(null===(r=p.data)||void 0===r?void 0:r.commentReplies.edges.length)||12},{requestPolicy:"cache-and-network"}).toPromise();case 4:case"end":return e.stop()}}),e)}))),[t,n]),v=(0,c.useCallback)((0,r.Z)(i().mark((function e(){var r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p.data&&!p.fetching){e.next=2;break}return e.abrupt("return");case 2:if(null!==(r=p.data.commentReplies.pageInfo)&&void 0!==r&&r.hasNextPage){e.next=4;break}return e.abrupt("return");case 4:if(null!==(o=p.data.commentReplies.pageInfo)&&void 0!==o&&o.endCursor){e.next=6;break}return e.abrupt("return");case 6:return e.prev=6,e.next=9,t.query(l.ki,{id:n,after:p.data.commentReplies.pageInfo.endCursor}).toPromise();case 9:return e.prev=9,e.finish(9);case 11:case"end":return e.stop()}}),e,null,[[6,,9,11]])}))),[t,p.data,p.fetching,n]);return(0,c.useEffect)((function(){var e=function(){f(Boolean(document.hidden))};return document.addEventListener("visibilitychange",e,!1),function(){document.removeEventListener("visibilitychange",e,!1)}}),[]),(0,u.Y)({task:x,pause:!n||d}),(0,c.useMemo)((function(){var e,n;return{repliesQuery:p,onFetchMoreReplies:v,canFetchMoreReplies:Boolean(null===(e=p.data)||void 0===e||null===(n=e.commentReplies.pageInfo)||void 0===n?void 0:n.hasNextPage)}}),[p,p.data,v])}},13794:function(e,n,t){t.d(n,{kF:function(){return l},YC:function(){return u},GS:function(){return c},VY:function(){return i},sq:function(){return a},IS:function(){return o},vQ:function(){return s}});var r=t(24161),o=(0,r.atom)({key:"playerIsPlaying",default:!0}),a=(0,r.atom)({key:"playerDirection",default:1}),i=(0,r.atom)({key:"playerCurrentSegment",default:[]}),c=(0,r.atom)({key:"playerCurrentPlayType",default:"loop"}),s=(0,r.atom)({key:"playerIsUsingSegment",default:!1}),u=(0,r.atom)({key:"playerCurrSegmentId",default:""}),l=(0,r.atom)({key:"isPlayerPlayOnHover",default:!1})},24450:function(e,n,t){var r;t.d(n,{s:function(){return r}}),function(e){e.COLOR_PALETTES="color_palettes",e.COMMENTS="comments",e.DOWNLOAD="download",e.EMBED="embed",e.FILE_INFO="file_info",e.LOTTIE_MOCKUP="lottie_mockup",e.NONE="none",e.QRCODE="qrcode",e.SEGMENT_MOCKUP="segment_mockup",e.VERSIONS="versions"}(r||(r={}))},95334:function(e,n,t){var r,o,a,i;t.d(n,{TL:function(){return r},CX:function(){return o},ow:function(){return a},TY:function(){return i},Lt:function(){return c}}),function(e){e.Point="Point"}(r||(r={})),function(e){e.Annotation="Annotation",e.Keyframe="Keyframe"}(o||(o={})),function(e){e.User="UserMention"}(a||(a={})),function(e){e.FileVersion="FileVersion"}(i||(i={}));var c=function(e){return e.flatMap((function(e){var n,t;return null!==(n=null===(t=e.node.extra)||void 0===t?void 0:t.frame)&&void 0!==n?n:[]})).sort((function(e,n){return e-n})).filter((function(e,n,t){return n===t.length-1||t[n+1]!==e}))}},34916:function(e,n,t){var r,o,a,i,c,s,u;t.d(n,{GN:function(){return r},Nn:function(){return o},hF:function(){return a},eL:function(){return i},nT:function(){return s},ws:function(){return u},QR:function(){return f},xK:function(){return m},qR:function(){return p},yx:function(){return l}}),function(e){e.DOWNLOAD="download",e.FULL_ACCESS="full_access",e.PUBLIC_DOWNLOAD="public_download",e.PUBLIC_VIEW="public_view",e.VIEW="view"}(r||(r={})),function(e){e.Loop="Loop",e.PlayOnce="PlayOnce"}(o||(o={})),function(e){e.DotLottie="lottie",e.Gif="gif",e.LottieJson="json",e.Mp4="mp4"}(a||(a={})),function(e){e.GIF="gif",e.MOV="mov",e.MP4="mp4",e.WEBM="webm"}(i||(i={})),function(e){e.DOWNLOAD="download",e.FULL_ACCESS="full_access",e.PUBLIC_DOWNLOAD="public_download",e.PUBLIC_VIEW="public_view",e.VIEW="view"}(c||(c={})),function(e){e.Approved="Approved",e.InProgress="InProgress",e.NeedsReview="NeedsReview",e.Shipped="Shipped"}(s||(s={})),function(e){e.Completed="Completed",e.Failed="Failed",e.InProgress="InProgress",e.Pending="Pending"}(u||(u={}));var l,d=function(e){return e.split(".").pop()};function f(e){if(!e.fileObject)return!1;var n=e.fileObject.filename,t=d(n);return void 0!==t&&["lottie","json"].includes(t)}function m(e){if(!e.fileObject)return!1;var n=e.fileObject.filename,t=d(n);return void 0!==t&&"creator"===t}function p(e){return e&&"Folder"===e.__typename}!function(e){e.COLOR_PALETTE="color-palette",e.DIRECT="Direct",e.PREMIUM_ANIMTIONS="premium-animations",e.URL="URL"}(l||(l={}))}}]);